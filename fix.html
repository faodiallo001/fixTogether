<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <link rel="icon" type="image/png" href="/favicon.png" />
  <link rel="apple-touch-icon" href="/favicon.png" />

  <title>Start a Fix – FixTogether</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    :root {
      --bg-main: #020617; /* bleu nuit */
      --bg-card: rgba(12, 19, 38, 0.96);
      --accent: #3b82f6;      /* bleu */
      --accent-soft: #60a5fa; /* bleu clair */
      --warm-main: #f7e6b5;   /* beige or */
      --warm-soft: #e7c880;   /* or sable */
      --text-main: #e5e7eb;
      --text-muted: #9ca3af;
      --border-subtle: rgba(148, 163, 184, 0.25);
      --radius-xl: 24px;
    }

    * { box-sizing: border-box; margin: 0; padding: 0; }

    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI",
        sans-serif;
      background:
        radial-gradient(circle at top, #0b1120 0, #020617 50%, #000 100%);
      color: var(--text-main);
      min-height: 100vh;
      position: relative;
      overflow-x: hidden;
    }

    body::before,
    body::after {
      content: "";
      position: fixed;
      inset: -120px;
      pointer-events: none;
      opacity: 0.4;
      mix-blend-mode: screen;
      background:
        radial-gradient(circle at 10% 0%, rgba(56, 189, 248, 0.22), transparent 55%),
        radial-gradient(circle at 90% 20%, rgba(99, 102, 241, 0.2), transparent 55%),
        radial-gradient(circle at 20% 80%, rgba(250, 204, 21, 0.16), transparent 55%);
      z-index: -2;
      animation: drift 16s ease-in-out infinite alternate;
    }

    body::after {
      opacity: 0.18;
      filter: blur(10px);
      animation-duration: 22s;
    }

    @keyframes drift {
      0% { transform: translate3d(0, 0, 0) scale(1); }
      100% { transform: translate3d(10px, -12px, 0) scale(1.03); }
    }

    .page {
      max-width: 1120px;
      margin: 0 auto;
      padding: 32px 16px 64px;
      position: relative;
    }

    .page::before {
      content: "";
      position: absolute;
      inset: 0;
      background-image: linear-gradient(
          rgba(148, 163, 184, 0.07) 1px,
          transparent 1px
        ),
        linear-gradient(
          90deg,
          rgba(148, 163, 184, 0.06) 1px,
          transparent 1px
        );
      background-size: 26px 26px;
      opacity: 0.12;
      pointer-events: none;
      z-index: -1;
      mask-image: radial-gradient(circle at top, black 0, black 45%, transparent 100%);
    }

    /* HEADER */

    header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 28px;
    }

    .logo {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .logo-mark {
      width: 32px;
      height: 32px;
      border-radius: 999px;
      background: conic-gradient(
        from 160deg,
        #0ea5e9,
        #6366f1,
        #fbbf24,
        #f97316,
        #0ea5e9
      );
      padding: 2px;
      box-shadow:
        0 0 0 1px rgba(15, 23, 42, 0.8),
        0 0 18px rgba(59, 130, 246, 0.6);
    }

    .logo-mark-inner {
      width: 100%;
      height: 100%;
      border-radius: inherit;
      background: radial-gradient(circle at 30% 10%, #fefce8, #0f172a 55%, #020617 100%);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 14px;
      font-weight: 600;
      color: #fefce8;
      text-shadow: 0 0 6px rgba(15, 23, 42, 0.8);
    }

    .logo-text-main {
      font-weight: 600;
      letter-spacing: 0.03em;
    }

    .logo-text-sub {
      font-size: 12px;
      color: var(--text-muted);
    }

    nav a {
      color: var(--text-muted);
      text-decoration: none;
      font-size: 14px;
      padding: 8px 14px;
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.35);
      background: rgba(15, 23, 42, 0.65);
      backdrop-filter: blur(12px);
      -webkit-backdrop-filter: blur(12px);
      transition: background 0.15s ease, color 0.15s ease, border-color 0.15s ease;
    }

    nav a:hover {
      background: rgba(37, 99, 235, 0.2);
      color: #e5e7eb;
      border-color: rgba(96, 165, 250, 0.8);
    }

    /* LAYOUT */

    .layout {
      display: grid;
      grid-template-columns: minmax(0, 1.6fr) minmax(0, 1.2fr);
      gap: 28px;
      align-items: flex-start;
    }

    .hero-title {
      font-size: clamp(26px, 4vw, 32px);
      margin-bottom: 10px;
      letter-spacing: 0.04em;
      text-transform: uppercase;
    }

    .hero-title span {
      background: linear-gradient(120deg, #38bdf8, #6366f1, #facc15);
      -webkit-background-clip: text;
      color: transparent;
    }

    .hero-subtitle {
      font-size: 14px;
      color: var(--text-muted);
      max-width: 520px;
      line-height: 1.6;
      margin-bottom: 14px;
    }

    .hero-note {
      font-size: 12px;
      color: var(--text-muted);
      margin-bottom: 18px;
    }

    .hero-note span {
      color: var(--warm-main);
      font-weight: 500;
    }

    .card {
      position: relative;
      border-radius: var(--radius-xl);
      padding: 20px 18px;
      background: var(--bg-card);
      border: 1px solid var(--border-subtle);
      box-shadow: 0 24px 80px rgba(15, 23, 42, 0.9);
      overflow: hidden;
    }

    .card::before {
      content: "";
      position: absolute;
      inset: -40%;
      opacity: 0.18;
      background:
        radial-gradient(circle at 0% 0%, rgba(96, 165, 250, 0.23), transparent 55%),
        radial-gradient(circle at 100% 100%, rgba(250, 204, 21, 0.2), transparent 55%);
      pointer-events: none;
      z-index: -1;
      filter: blur(2px);
    }

    .field {
      margin-bottom: 14px;
    }

    .field label {
      display: block;
      font-size: 13px;
      margin-bottom: 4px;
    }

    .field small {
      display: block;
      font-size: 11px;
      color: var(--text-muted);
      margin-bottom: 4px;
    }

    input[type="text"],
    input[type="email"],
    textarea,
    select {
      width: 100%;
      border-radius: 12px;
      border: 1px solid rgba(148, 163, 184, 0.6);
      background: rgba(15, 23, 42, 0.9);
      color: var(--text-main);
      padding: 9px 10px;
      font-size: 13px;
      outline: none;
      transition:
        border-color 0.15s ease,
        box-shadow 0.15s ease,
        background 0.15s ease,
        transform 0.1s ease;
    }

    textarea {
      resize: vertical;
      min-height: 80px;
    }

    input::placeholder,
    textarea::placeholder {
      color: #6b7280;
    }

    input:focus,
    textarea:focus,
    select:focus {
      border-color: var(--accent-soft);
      box-shadow: 0 0 0 1px rgba(59, 130, 246, 0.5), 0 0 0 6px rgba(37, 99, 235, 0.18);
      background: rgba(15, 23, 42, 0.96);
      transform: translateY(-0.5px);
    }

    select {
      appearance: none;
    }

    .btn-primary {
      border-radius: 999px;
      padding: 10px 22px;
      border: none;
      cursor: pointer;
      background: linear-gradient(120deg, var(--accent), var(--warm-soft));
      color: #0b1120;
      font-weight: 600;
      font-size: 14px;
      box-shadow: 0 18px 40px rgba(250, 204, 21, 0.4);
      letter-spacing: 0.03em;
      text-transform: uppercase;
      transition:
        transform 0.15s ease,
        box-shadow 0.15s ease,
        opacity 0.15s ease,
        filter 0.15s ease;
    }

    .btn-primary:hover {
      transform: translateY(-1px) scale(1.01);
      opacity: 0.97;
      filter: saturate(1.05);
      box-shadow: 0 24px 60px rgba(234, 179, 8, 0.55);
    }

    .price-note {
      font-size: 12px;
      color: var(--text-muted);
      margin-top: 6px;
    }

    .side-card-title {
      font-size: 14px;
      margin-bottom: 8px;
      font-weight: 600;
    }

    .side-card-text {
      font-size: 12px;
      color: var(--text-muted);
      line-height: 1.6;
      margin-bottom: 10px;
    }

    .pill-list {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      margin-top: 6px;
      font-size: 11px;
    }

    .pill {
      border-radius: 999px;
      padding: 4px 10px;
      border: 1px solid rgba(148, 163, 184, 0.6);
      color: var(--text-muted);
      background: rgba(15, 23, 42, 0.9);
    }

    footer {
      margin-top: 40px;
      font-size: 11px;
      color: var(--text-muted);
      border-top: 1px solid rgba(15, 23, 42, 0.9);
      padding-top: 16px;
      display: flex;
      justify-content: space-between;
      gap: 12px;
      flex-wrap: wrap;
    }

    footer a {
      color: var(--accent-soft);
      text-decoration: none;
      font-size: 11px;
    }

    footer a:hover {
      text-decoration: underline;
    }

    @media (max-width: 840px) {
      header {
        flex-direction: column;
        align-items: flex-start;
        gap: 10px;
      }

      .layout {
        grid-template-columns: minmax(0, 1fr);
      }
    }

    @media (max-width: 540px) {
      .page {
        padding-inline: 14px;
      }

      .card {
        padding: 18px 14px;
      }
    }
  </style>
</head>
  
<body>
  <div class="page">
    <header>
      <div class="logo">
        <div class="logo-mark">
          <div class="logo-mark-inner">FT</div>
        </div>
        <div>
          <div class="logo-text-main">FixTogether</div>
          <div class="logo-text-sub">Résolution silencieuse des conflits</div>
        </div>
      </div>

      <nav>
        <a href="index.html">Accueil</a>
        <a href="howitworks.html">Comment ça marche</a>
      </nav>
    </header>

    <main>
      <div class="layout">
        <section>
          <h1 class="hero-title">
            Démarrer une <span>Fix</span>
          </h1>

          <p class="hero-subtitle">
            C’est votre espace pour dire ce qui s’est réellement passé et ce que vous ressentez.
            Ensuite, l’autre personne pourra lire calmement, puis écrire sa version.
            FixTogether enverra ensuite un seul message final, neutre et apaisant, par email.
          </p>

          <p class="hero-note">
            Seule la personne qui démarre paie. <span>4.99&nbsp;$</span> pour une situation.
            L’autre personne répond gratuitement.
          </p>

          <form class="card" id="fixForm">
            <div class="field">
              <label for="title">Donnez un titre court à cette situation (facultatif)</label>
              <input id="title" type="text" placeholder="Exemple : Dispute après mon dîner d’anniversaire" />
            </div>

            <div class="field">
              <label for="what">Que s’est-il passé ?</label>
              <small>
                Décrivez les faits de votre point de vue : ce qui a été dit ou fait.
                Restez sur votre vécu, sans insulte.
              </small>
              <textarea id="what" placeholder="Écrivez votre version ici…" required></textarea>
            </div>

            <div class="field">
              <label for="feel">Comment vous sentez-vous à ce sujet ?</label>
              <small>
                Blessé(e), en colère, déçu(e), triste, fatigué(e), confus(e)… mettez-le en mots.
              </small>
              <textarea id="feel" placeholder="Expliquez vos émotions ici…" required></textarea>
            </div>

            <div class="field">
              <label for="goal">Qu’aimeriez-vous qu’il se passe ensuite ?</label>
              <select id="goal">
                <option value="">Choisissez une option…</option>
                <option>Se comprendre mieux</option>
                <option>Se reconnecter et faire la paix</option>
                <option>Poser des limites claires</option>
                <option>Mettre fin aux choses avec respect</option>
                <option>Juste être entendu(e)</option>
              </select>
            </div>

            <div class="field">
              <label for="name">Votre prénom</label>
              <input id="name" type="text" placeholder="Exemple : Faozia" required />
            </div>

            <div class="field">
              <label for="email">Votre email</label>
              <small>Nous enverrons la Fix finale à cette adresse.</small>
              <input id="email" type="email" placeholder="vous@exemple.com" required />
            </div>

            <button type="button" id="payBtn" class="btn-primary">
              Payer et générer mon lien
            </button>

            <div class="price-note">
              Après confirmation du paiement, vous recevrez un lien privé à envoyer à l’autre personne.
            </div>
          </form>
        </section>

        <aside class="card">
          <div class="side-card-title">Avant d’écrire</div>
          <div class="side-card-text">
            FixTogether n’est pas un endroit pour attaquer ou humilier.
            C’est un espace pour expliquer votre vécu avec clarté, et laisser l’autre répondre
            sans pression. Le but : apaiser, clarifier, avancer.
          </div>

          <div class="side-card-title">Idéal pour</div>
          <div class="pill-list">
            <div class="pill">Conflits de couple</div>
            <div class="pill">Silence / distance</div>
            <div class="pill">Tensions familiales</div>
            <div class="pill">Disputes entre amis</div>
            <div class="pill">Malentendus au travail</div>
          </div>
        </aside>
      </div>
    </main>

    <footer>
      <div>© <span id="year"></span> FixTogether. Tous droits réservés.</div>
      <div>
        <a href="index.html">Accueil</a> ·
        <a href="howitworks.html">Comment ça marche</a> ·
        <a href="contact.html">Contact</a> ·
        <a href="terms.html">Conditions</a> ·
        <a href="privacy.html">Confidentialité</a>
      </div>
    </footer>
  </div>

  <script>
    document.getElementById("year").textContent = new Date().getFullYear();

    const payBtn = document.getElementById("payBtn");

    payBtn.addEventListener("click", async () => {
      const data = {
        title: document.getElementById("title").value.trim(),
        what: document.getElementById("what").value.trim(),
        feel: document.getElementById("feel").value.trim(),
        goal: document.getElementById("goal").value,
        name: document.getElementById("name").value.trim(),
        email: document.getElementById("email").value.trim()
      };

      if (!data.what || !data.feel || !data.name || !data.email) {
        alert("Veuillez remplir : ce qui s’est passé, vos émotions, votre prénom et votre email.");
        return;
      }

      const json = JSON.stringify(data);
      const base64 = btoa(unescape(encodeURIComponent(json)));
      const caseData = base64;

      try {
        const response = await fetch("/api/create-checkout", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ caseData })
        });

        if (!response.ok) {
          alert("Impossible de démarrer le paiement. Réessayez.");
          return;
        }

        const result = await response.json();

        if (result.checkoutUrl) {
          window.location = result.checkoutUrl;
        } else {
          alert("Aucun lien de paiement n’a été reçu.");
        }
      } catch (err) {
        console.error(err);
        alert("Une erreur est survenue. Réessayez.");
      }
    });
  </script>
</body>

</html>





